<DOCTYPE! html>

<head>
  <meta charset=UTF-8 />
  <title>Co-PI Collaboration Network</title>
  <script src="../gui/lib/angularjs/angular.min.js"></script>
  <script src="lib/head.js"></script>
  <script src="src/Init.js"></script>
  <link rel="stylesheet" href="../gui/lib/bootstrap/dist/css/bootstrap.min.css">
  <script src="../gui/lib/jquery/jquery-1.12.4.min.js"></script>
  <script src="../gui/lib/bootstrap/dist/js/bootstrap.min.js"></script>
</head>

<body style="">
  <div ng-include="'partials/copi_usage_modal.html'"></div>
  <button type="button" class="btn btn-info btn-s" data-toggle="modal"
  data-target="#copiUsageModal" id="copiUsageButton">
  <span class="glyphicon glyphicon-info-sign"></span> Usage </button>

  <div ng-include="'partials/copi_about_modal.html'"></div>
  <button type="button" class="btn btn-primary btn-s" data-toggle="modal" data-target="#copiAboutModal" id="copiAboutButton">
    <span class="glyphicon glyphicon-question-sign"></span> About</button>

    <div flex layout-fill layout="row" style="height:600px; overflow-y:hidden;">
      <div flex="80" layout="column">
        <div class="filter-section" layout="column" >
          <label id="filterLabel">Filter Labels by #Grants</label>
          <input class="range-slider" type="hidden" id="range" name="range" value=""/>
        </div>

        <div flex>
          <div ng-controller="ngCnsVisual" ng-data-attr="ng-cns-visual" ng-reset-on-resize ng-config="visuals/forceNetwork01-configs.js" ng-vis-type="ForceNetwork" id="forceNetwork01" ng-data-field="copiData" ng-identifier="forceNetwork01" ngstyle="top: 60px;">
          </div>

          <div class="legend-space">
            <div class="legend-container legend">
              <button >
                <span>Legend</span>
              </button>
              <div class="legend-row">
                <div flex layout="row">
                  <div flex="65" layout="column">
                    <div flex class="legend-item-label" id = "nodes">Nodes</div>
                    <div flex layout="row">
                      <div flex class="legend-item">
                        <div layout="column" layout-fill class="wrapper" ng-controller="ngCnsVisual" ng-data-attr="ng-cns-visual" ng-vis-type="LegendNodeSize" id="nodeSize" ng-identifier="nodeSize">
                        </div>
                      </div>
                      <div flex class="legend-item">
                        <div layout="column" layout-fill class="wrapper" ng-controller="ngCnsVisual" ng-data-attr="ng-cns-visual" ng-vis-type="LegendNodeColor" id="nodeColor" ng-identifier="nodeColor">
                        </div>
                      </div>

                    </div>
                  </div>
                  <div flex layout="column">
                    <div flex class="legend-item-label" id ="edges">Edges</div>
                    <div flex layout="row">
                      <div flex class="legend-item">
                        <div layout="column" layout-fill class="wrapper" ng-controller="ngCnsVisual" ng-data-attr="ng-cns-visual" ng-vis-type="LegendEdgeSize" id="edgeSize" ng-identifier="edgeSize">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div flex >

        <div style="overflow-y: scroll; height:1300px;" ng-controller="ngCnsVisual" ng-data-attr="ng-cns-visual" ng-reset-on-resize ng-config="visuals/barChart01-configs.js" ng-vis-type="HVBarChart" id="barChart01" ng-data-field="copiData" ng-identifier="barChart01" >

        </div>
      </div>
    </div>
  </body>
  <script>
  /* Adding listeners for resize and orientation change on mobile browser events */
  window.addEventListener('resize', onWindowResize, false);
  /* window resize event listener function */
  function onWindowResize()
  {
    window.location.reload();
  }
  var legendToggleOff = true;
  setTimeout(function() {
    $(document).ready(function() {
      $(".legend-container").click(function() {
        toggleLegend();
      });
    });
  }, 2000)

  function toggleLegend() {
    if (legendToggleOff) {
      $(".legend-container").animate({
        bottom: '0px'
      }, 20);
      legendToggleOff = false;
    } else {
      $(".legend-container").animate({
        bottom: '-205px'
      }, 75);
      legendToggleOff = true;
    }

  }
</script>
</html>
